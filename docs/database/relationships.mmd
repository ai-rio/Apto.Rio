erDiagram
    %% Core User Relationships
    profiles ||--|| users : authenticated_as
    profiles }o--|| pricing_plans : subscribed_to
    profiles ||--o{ favorites : saves
    profiles ||--o{ inquiries : sends
    
    %% Role Extensions
    profiles ||--o{ developer_profiles : extends_as
    profiles ||--o{ agent_profiles : extends_as
    
    %% Developer Relationships
    developer_profiles ||--o{ properties : publishes
    developer_profiles ||--o{ stripe_accounts : has
    
    %% Agent Relationships
    agent_profiles ||--o{ agent_properties : manages
    agent_properties }o--|| properties : is_managed
    
    %% Property Relationships
    properties ||--o{ property_media : contains
    properties ||--o{ property_units : offers
    properties ||--o{ inquiries : receives_about
    properties ||--o{ property_updates : tracks
    properties ||--o{ favorites : saved_as
    
    %% Subscription and Payment Relationships
    pricing_plans ||--o{ pricing_features : includes
    profiles ||--o{ subscriptions : purchases
    subscriptions }o--|| pricing_plans : for_plan
    subscriptions ||--o{ invoices : generates
    
    %% Notification System
    profiles ||--o{ notifications : receives
    inquiries ||--o{ notifications : triggers
    property_updates ||--o{ notifications : creates